<!DOCTYPE html> <html lang="en"><head> <meta charset="UTF-8"/> <title>整理Git命令 👍 |LawssssCat's Blog </title><link rel="icon" href="/assets/favicon.ico"/> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes"/> <!-- My CSS --> <link rel="stylesheet" type="text/css" href="/assets/css/common.css" id='common_css'/><!--custom head--> <!-- 显示MathJax公式 see https://www.codecogs.com/latex/eqneditor.php --> <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" ></script> <!--feed--> <link type="application/atom+xml" rel="alternate" href="https://lawsssscat.github.io/feed.xml" title="LawssssCat&apos;s Blog" /> <!--seo--> <!-- Begin Jekyll SEO tag v2.8.0 --> <meta name="generator" content="Jekyll v4.2.2" /> <meta property="og:title" content="整理Git命令 👍" /> <meta name="author" content="LawssssCat" /> <meta property="og:locale" content="en" /> <meta name="description" content="整理：按功能归类常用命令行" /> <meta property="og:description" content="整理：按功能归类常用命令行" /> <link rel="canonical" href="https://lawsssscat.github.io/docs/git/Git-Command-put-in-order.html" /> <meta property="og:url" content="https://lawsssscat.github.io/docs/git/Git-Command-put-in-order.html" /> <meta property="og:site_name" content="LawssssCat’s Blog" /> <meta property="og:type" content="article" /> <meta property="article:published_time" content="2022-06-01T00:00:00+00:00" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="整理Git命令 👍" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"LawssssCat"},"dateModified":"2022-06-01T00:00:00+00:00","datePublished":"2022-06-01T00:00:00+00:00","description":"整理：按功能归类常用命令行","headline":"整理Git命令 👍","mainEntityOfPage":{"@type":"WebPage","@id":"https://lawsssscat.github.io/docs/git/Git-Command-put-in-order.html"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://lawsssscat.github.io/assets/favicon.ico"},"name":"LawssssCat"},"url":"https://lawsssscat.github.io/docs/git/Git-Command-put-in-order.html"}</script> <!-- End Jekyll SEO tag --> <!--custom head end--></head><body><header class="site-header"><a href="https://github.com/LawssssCat/lawsssscat.github.io" class="github-corner" aria-label="View source on Github" target="_blank" rel="noopener noreferrer"> <svg width="80" height="80" viewbox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style></header> <div class="site-content">
<h1>
<!--todo front page--> <a href="/">..</a>/整理Git命令 👍<div class="github-buttons"> <img style="padding-left:10px;" src="https://komarev.com/ghpvc/?username=LawssssCat&amp;style=flat-square"> <img src="https://img.shields.io/github/commit-activity/m/LawssssCat/LawssssCat.github.io" alt="GitHub commit activity"> <!--<a class="github-button" href="https://github.com/LawssssCat/LawssssCat.github.io" data-icon="octicon-star" data-show-count="true" aria-label="Star on GitHub">Star</a>--> <a class="github-button" href="https://github.com/LawssssCat" data-color-scheme="no-preference: dark_high_contrast; light: light_high_contrast; dark: light;" data-show-count="true" aria-label="Follow @LawssssCat on GitHub">Follow @LawssssCat</a> </div> </h1>
<style type="text/css"> #post-classified-list ul { display: inline-block; } </style> <div id="post-classified-list">
<ul class="category-list"><li><a data-label="git" class="category-item category-item-git" data-description="💡 [There are not description now. You can submit a request pull to me if you wish to contribute.]">git</a></li></ul>
<ul class="tag-list"></ul>
</div> <ul id="toc" class="section-nav"> <li class="toc-entry toc-h3">
<a href="#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE">安装、配置</a> <ul> <li class="toc-entry toc-h4"><a href="#%E9%85%8D%E7%BD%AEssh">配置：ssh</a></li> <li class="toc-entry toc-h4"><a href="#%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86%E8%BF%9E%E6%8E%A5">配置：代理连接</a></li> </ul> </li> <li class="toc-entry toc-h3"><a href="#%E5%88%9B%E5%BB%BA%E7%89%88%E6%9C%AC%E5%BA%93-init">创建版本库 init</a></li> <li class="toc-entry toc-h3"><a href="#%E5%85%B3%E8%81%94%E8%BF%9C%E7%A8%8B%E7%89%88%E6%9C%AC%E5%BA%93-remote">关联远程版本库 remote</a></li> <li class="toc-entry toc-h3">
<a href="#%E6%9A%82%E5%AD%98%E6%8F%90%E4%BA%A4-addcommit">暂存、提交 add、commit</a> <ul> <li class="toc-entry toc-h4"><a href="#%E6%A6%82%E5%BF%B5%E4%BD%9C%E5%8C%BAworking-directory%E5%92%8C%E7%89%88%E6%9C%AC%E5%BA%93repository%E6%9A%82%E5%AD%98%E5%8C%BAstage">概念：作区（working directory）和版本库（repository）、暂存区（stage）</a></li> <li class="toc-entry toc-h4"><a href="#%E6%A6%82%E5%BF%B5%E6%96%87%E4%BB%B6%E7%8A%B6%E6%80%81%E5%91%A8%E6%9C%9F">概念：文件状态周期</a></li> </ul> </li> <li class="toc-entry toc-h3">
<a href="#%E5%85%8B%E9%9A%86-clone">克隆 clone</a> <ul> <li class="toc-entry toc-h4"><a href="#depth-1">–depth 1</a></li> </ul> </li> <li class="toc-entry toc-h3"><a href="#-%E6%97%A5%E5%BF%97-logreflog"># 日志 log、reflog</a></li> <li class="toc-entry toc-h3">
<a href="#%E5%88%86%E6%94%AF%E8%8A%82%E7%82%B9%E5%88%9B%E5%BB%BA%E5%88%87%E6%8D%A2%E5%9B%9E%E9%80%80-branchcheckoutreset">分支（节点）创建/切换/回退 branch、checkout、reset</a> <ul> <li class="toc-entry toc-h4"><a href="#%E6%A6%82%E5%BF%B5%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5">概念：分支管理策略</a></li> <li class="toc-entry toc-h4"><a href="#%E5%BA%94%E7%94%A8github-%E5%9B%9E%E9%80%80-master-%E5%88%86%E6%94%AF">应用：github 回退 master 分支</a></li> </ul> </li> <li class="toc-entry toc-h3">
<a href="#%E6%9A%82%E5%AD%98%E4%BF%AE%E6%94%B9-stash">暂存修改 stash</a> <ul> <li class="toc-entry toc-h4"><a href="#%E9%97%AE%E9%A2%98pop%E6%97%B6%E5%8F%91%E7%94%9F%E5%86%B2%E7%AA%81">问题：pop时发生冲突</a></li> </ul> </li> <li class="toc-entry toc-h3">
<a href="#%E5%90%88%E5%B9%B6-merge">合并 merge</a> <ul> <li class="toc-entry toc-h4"><a href="#%E5%BA%94%E7%94%A8%E8%BF%9C%E7%AB%AFfork%E5%90%88%E5%B9%B6%E6%8B%89%E5%8F%96fork%E9%A1%B9%E7%9B%AE%E4%BB%A3%E7%A0%81">应用：远端fork合并（拉取fork项目代码）</a></li> <li class="toc-entry toc-h4"><a href="#%E5%90%88%E5%B9%B6%E5%89%8D%E6%8E%92%E9%99%A4%E6%9F%90%E4%BA%9B%E4%BF%AE%E6%94%B9">合并前排除某些修改</a></li> </ul> </li> <li class="toc-entry toc-h3"><a href="#%E5%AF%B9%E6%AF%94-diff">对比 diff</a></li> <li class="toc-entry toc-h3"><a href="#%E5%BF%BD%E7%95%A5%E7%89%B9%E6%AE%8A%E6%96%87%E4%BB%B6-gitignore">忽略特殊文件 .gitignore</a></li> <li class="toc-entry toc-h3">
<a href="#%E5%AD%90%E6%A8%A1%E5%9D%97-submodule">子模块 submodule</a> <ul> <li class="toc-entry toc-h4"><a href="#%E5%AD%90%E6%A8%A1%E5%9D%97%E6%B7%BB%E5%8A%A0">子模块添加</a></li> <li class="toc-entry toc-h4"><a href="#%E5%AD%90%E6%A8%A1%E5%9D%97%E6%9F%A5%E7%9C%8B">子模块查看</a></li> <li class="toc-entry toc-h4"><a href="#%E5%AD%90%E6%A8%A1%E5%9D%97%E6%9B%B4%E6%96%B0">子模块更新</a></li> <li class="toc-entry toc-h4"><a href="#%E5%AD%90%E6%A8%A1%E5%9D%97%E7%A7%BB%E9%99%A4">子模块移除</a></li> <li class="toc-entry toc-h4"><a href="#%E5%AD%90%E6%A8%A1%E5%9D%97%E4%BF%AE%E6%94%B9">子模块修改</a></li> </ul> </li> <li class="toc-entry toc-h3"><a href="#%E6%9C%AA%E5%BD%92%E7%B1%BB">未归类</a></li> </ul> <p>整理：按功能归类常用命令行</p> <p><img src="https://img-blog.csdnimg.cn/20191206131904839.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xhd3Nzc3NDYXQ=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <h3 id="安装配置"> <a class="anchor" href="#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AE" aria-hidden="true"><span class="octicon octicon-link"></span></a>安装、配置</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>apt-get <span class="nb">install </span>git
</code></pre></div></div> <h4 id="配置ssh"> <a class="anchor" href="#%E9%85%8D%E7%BD%AEssh" aria-hidden="true"><span class="octicon octicon-link"></span></a>配置：ssh</h4> <p>配置本地信息</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git config <span class="nt">--global</span> user.name <span class="s2">"xxxxxxxxxxx"</span>
git config <span class="nt">--global</span> user.email <span class="s2">"xxxxxx@xxxxx.com"</span>
git config <span class="nt">--list</span>
<span class="c"># 如果没有 global 可以在 .git/config 中查看</span>
</code></pre></div></div> <p>配置ssh密钥</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen <span class="nt">-t</span> rsa <span class="nt">-C</span> xxxxxxxxxxxxx@xxxxx.com
<span class="nb">cat</span> ~/.ssh/id_rsa.pub
</code></pre></div></div> <p>粘贴到 <a href="https://github.com/settings/keys">https://github.com/settings/keys</a></p> <p>测试</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh <span class="nt">-vT</span> git@github.com
</code></pre></div></div> <h4 id="配置代理连接"> <a class="anchor" href="#%E9%85%8D%E7%BD%AE%E4%BB%A3%E7%90%86%E8%BF%9E%E6%8E%A5" aria-hidden="true"><span class="octicon octicon-link"></span></a>配置：代理连接</h4> <p>下面几种方法</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Method 1. git http + proxy http</span>
git config <span class="nt">--global</span> http.proxy <span class="s2">"http://127.0.0.1:1080"</span>
git config <span class="nt">--global</span> https.proxy <span class="s2">"http://127.0.0.1:1080"</span>

<span class="c"># Method 2. git http + proxy shocks</span>
git config <span class="nt">--global</span> http.proxy <span class="s2">"socks5://127.0.0.1:1080"</span>
git config <span class="nt">--global</span> https.proxy <span class="s2">"socks5://127.0.0.1:1080"</span>

<span class="c"># to unset</span>
git config <span class="nt">--global</span> <span class="nt">--unset</span> http.proxy
git config <span class="nt">--global</span> <span class="nt">--unset</span> https.proxy

<span class="c"># Method 3. git ssh + proxy http</span>
vim ~/.ssh/config
Host github.com
HostName github.com
User git
ProxyCommand socat - PROXY:127.0.0.1:%h:%p,proxyport<span class="o">=</span>1087

<span class="c"># Method 4. git ssh + proxy socks</span>
vim ~/.ssh/config
Host github.com
HostName github.com
User git
ProxyCommand nc <span class="nt">-v</span> <span class="nt">-x</span> 127.0.0.1:1080 %h %p
</code></pre></div></div> <h3 id="创建版本库-init"> <a class="anchor" href="#%E5%88%9B%E5%BB%BA%E7%89%88%E6%9C%AC%E5%BA%93-init" aria-hidden="true"><span class="octicon octicon-link"></span></a>创建版本库 init</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 初始化</span>
git init

<span class="c"># 添加修改的文件</span>
git add README.md 

<span class="c"># 提交版本</span>
git commit <span class="nt">-m</span> <span class="s2">"add 3 files."</span>
</code></pre></div></div> <h3 id="关联远程版本库-remote"> <a class="anchor" href="#%E5%85%B3%E8%81%94%E8%BF%9C%E7%A8%8B%E7%89%88%E6%9C%AC%E5%BA%93-remote" aria-hidden="true"><span class="octicon octicon-link"></span></a>关联远程版本库 remote</h3> <p>创建远程仓库</p> <p><a href="https://github.com/new">https://github.com/new</a></p> <p>上传本地内容</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 关联origin（默认的名字）到远程库</span>
git remote add origin git@github.com:cuihanObject/cmdTest.git
git remote <span class="nt">-v</span>

<span class="c"># 推送版本</span>
git push <span class="nt">--set-upstream</span> origin master
<span class="c"># 以后推送就只需要</span>
git push 
<span class="c"># 默认会补全缺省</span>
git push origin master
</code></pre></div></div> <p>==注意：这里需要配置好ssh密钥==</p> <h3 id="暂存提交-addcommit"> <a class="anchor" href="#%E6%9A%82%E5%AD%98%E6%8F%90%E4%BA%A4-addcommit" aria-hidden="true"><span class="octicon octicon-link"></span></a>暂存、提交 add、commit</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git add <span class="nb">.</span>

git commit <span class="nt">-m</span> <span class="s2">"xxxxxxxxx"</span>

git commit <span class="nt">--amend</span> （修改上次提交） <span class="nt">--no-edit</span>（不修改评论）
</code></pre></div></div> <h4 id="概念作区working-directory和版本库repository暂存区stage"> <a class="anchor" href="#%E6%A6%82%E5%BF%B5%E4%BD%9C%E5%8C%BAworking-directory%E5%92%8C%E7%89%88%E6%9C%AC%E5%BA%93repository%E6%9A%82%E5%AD%98%E5%8C%BAstage" aria-hidden="true"><span class="octicon octicon-link"></span></a><font color="red">概念：作区（working directory）和版本库（repository）、暂存区（stage）</font> </h4> <ul> <li>工作区（Working Directory） 就是系统目录</li> <li>版本库（Repository） 工作区有一个隐藏目录 <code class="language-plaintext highlighter-rouge">.git</code>，它就是版本库</li> <li>暂存区（stage） <code class="language-plaintext highlighter-rouge">.git</code> 里存了很多东西，其中最重要的就是称为<code class="language-plaintext highlighter-rouge">stage</code>（或者叫<code class="language-plaintext highlighter-rouge">index</code>）的暂存区</li> </ul> <p><img src="https://img-blog.csdnimg.cn/f9a25f1fc69446ab97c9ce5ef0ad2ca5.png" alt="在这里插入图片描述"></p> <p>add 和 commit 的操作如下</p> <ul> <li> <p><code class="language-plaintext highlighter-rouge">git add</code> 实际上就是把文件修改添加到暂存区</p> </li> <li> <p><code class="language-plaintext highlighter-rouge">git commit</code> 提实际上就是把暂存区的所有内容提交到当前分支</p> </li> </ul> <p><img src="https://img-blog.csdnimg.cn/20191204172921413.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xhd3Nzc3NDYXQ=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <h4 id="概念文件状态周期"> <a class="anchor" href="#%E6%A6%82%E5%BF%B5%E6%96%87%E4%BB%B6%E7%8A%B6%E6%80%81%E5%91%A8%E6%9C%9F" aria-hidden="true"><span class="octicon octicon-link"></span></a>概念：文件状态周期</h4> <p><img src="https://img-blog.csdnimg.cn/2019120613194193.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xhd3Nzc3NDYXQ=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"> （工作区 - 缓存区 - 提交区 ）</p> <h3 id="克隆-clone"> <a class="anchor" href="#%E5%85%8B%E9%9A%86-clone" aria-hidden="true"><span class="octicon octicon-link"></span></a>克隆 clone</h3> <h4 id="depth-1"> <a class="anchor" href="#depth-1" aria-hidden="true"><span class="octicon octicon-link"></span></a>–depth 1</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone <span class="nt">--depth</span> 1 https://github.com/labuladong/fucking-algorithm.git
</code></pre></div></div> <p>可以看到我们只克隆下包含最近一次commit的一个分支，这样这个项目文件就不会很大</p> <h3 id="-日志-logreflog"> <a class="anchor" href="#-%E6%97%A5%E5%BF%97-logreflog" aria-hidden="true"><span class="octicon octicon-link"></span></a># 日志 log、reflog</h3> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 查看HEAD全部的变化</span>
git reflog

<span class="c"># –graph 图形</span>
<span class="c"># –pretty=oneline 减少数据</span>
<span class="c"># –abbrev-commit 头部数据减少</span>
git log <span class="nt">--graph</span> <span class="nt">--pretty</span><span class="o">=</span>oneline <span class="nt">--abbrev-commit</span>
</code></pre></div></div> <p><img src="https://img-blog.csdnimg.cn/8ffea8e9d06a48f08e2c0383ae332606.png" alt="在这里插入图片描述"></p> <h3 id="分支节点创建切换回退-branchcheckoutreset"> <a class="anchor" href="#%E5%88%86%E6%94%AF%E8%8A%82%E7%82%B9%E5%88%9B%E5%BB%BA%E5%88%87%E6%8D%A2%E5%9B%9E%E9%80%80-branchcheckoutreset" aria-hidden="true"><span class="octicon octicon-link"></span></a>分支（节点）创建/切换/回退 branch、checkout、reset</h3> <p>创建</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 创建</span>
git branch dev
<span class="c"># 创建并切换新分支</span>
git checkout <span class="nt">-b</span> dev
</code></pre></div></div> <p>切换：工作空间切换</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout <span class="o">[</span>版本] <span class="o">[</span>文件]
</code></pre></div></div> <p>回退：工作空间切换、==分支指向同时切换==</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git reset <span class="nt">--hard</span> commit_id<span class="o">(</span>可用 git log –oneline 查看<span class="o">)</span>
</code></pre></div></div> <blockquote> <p>《Git Reset 三种模式》 <a href="https://www.jianshu.com/p/c2ec5f06cf1a">https://www.jianshu.com/p/c2ec5f06cf1a</a></p> </blockquote> <p>删除</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git branch <span class="nt">-d</span> dev
</code></pre></div></div> <h4 id="概念分支管理策略"> <a class="anchor" href="#%E6%A6%82%E5%BF%B5%E5%88%86%E6%94%AF%E7%AE%A1%E7%90%86%E7%AD%96%E7%95%A5" aria-hidden="true"><span class="octicon octicon-link"></span></a><font color="red">概念：分支管理策略</font> </h4> <p><img src="https://img-blog.csdnimg.cn/2019120516450161.png" alt="在这里插入图片描述"></p> <h4 id="应用github-回退-master-分支"> <a class="anchor" href="#%E5%BA%94%E7%94%A8github-%E5%9B%9E%E9%80%80-master-%E5%88%86%E6%94%AF" aria-hidden="true"><span class="octicon octicon-link"></span></a>应用：github 回退 master 分支</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 切换master分支</span>
git checkout master 
<span class="c"># 回退本地</span>
git reset <span class="nt">--hard</span> 1f12413691b70d2d75d3c982823f2018ef193e33
<span class="c"># 强制提交远程</span>
git push origin master <span class="nt">-f</span>
</code></pre></div></div> <h3 id="暂存修改-stash"> <a class="anchor" href="#%E6%9A%82%E5%AD%98%E4%BF%AE%E6%94%B9-stash" aria-hidden="true"><span class="octicon octicon-link"></span></a>暂存修改 stash</h3> <p>暂存</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 执行存储时，添加备注，方便查找</span>
<span class="c"># 只有git stash 也要可以的，但查找时不方便识别。</span>
git stash save “save message”
</code></pre></div></div> <p>查看</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 查看stash了哪些存储</span>
git stash list
<span class="c"># 显示做了哪些改动</span>
<span class="c"># 默认show第一个存储,如果要显示其他存贮，后面加stash@{$num}，比如第二个 git stash show stash@{1}</span>
git stash show
</code></pre></div></div> <p>恢复</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 应用某个存储,但不会把存储从存储列表中删除</span>
<span class="c"># 默认使用第一个存储,即stash@{0}，如果要使用其他个，git stash apply stash@{$num} ， 比如第二个：git stash apply stash@{1}</span>
git stash apply 
<span class="c"># 应用某个存储,且会把存储从存储列表中删除</span>
<span class="c"># 默认为第一个stash,即stash@{0}，如果要应用并删除其他stash，命令：git stash pop stash@{$num} ，比如应用并删除第二个：git stash pop stash@{1}</span>
git stash pop
</code></pre></div></div> <p>删除</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 丢弃stash@{num}存储，从列表中删除这个存储</span>
git stash drop stash@<span class="o">{</span>num<span class="o">}</span>
<span class="c"># 删除所有缓存的stash</span>
git stash clear
</code></pre></div></div> <h4 id="问题pop时发生冲突"> <a class="anchor" href="#%E9%97%AE%E9%A2%98pop%E6%97%B6%E5%8F%91%E7%94%9F%E5%86%B2%E7%AA%81" aria-hidden="true"><span class="octicon octicon-link"></span></a>问题：pop时发生冲突</h4> <p>==前提：pop时前应该把工作空间恢复到stash前的分支==</p> <p>若分支经过提交，则可能发生冲突。pop时发生冲突后</p> <ol> <li>手动恢复冲突</li> <li><code class="language-plaintext highlighter-rouge">git stash drop stash@{num}</code></li> </ol> <h3 id="合并-merge"> <a class="anchor" href="#%E5%90%88%E5%B9%B6-merge" aria-hidden="true"><span class="octicon octicon-link"></span></a><font color="red">合并 merge</font> </h3> <blockquote> <p>《git merge和git merge –no-ff的区别》 <a href="https://www.cnblogs.com/damoblog/p/13144379.html">https://www.cnblogs.com/damoblog/p/13144379.html</a></p> </blockquote> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Fast forward 模式（默认）</span>
git merge dev
git merge dev <span class="nt">--ff</span>

<span class="c"># no-ff 模式（推荐）</span>
git merge <span class="nt">--no-ff</span> <span class="nt">-m</span> <span class="s2">"merge with no-ff"</span> dev
</code></pre></div></div> <p><strong>区分几种模式</strong></p> <ol> <li>fast-forward Git 合并两个分支时，如果顺着一个分支走下去可以到达另一个分支的话，那么 Git 在合并两者时，只会简单地把指针右移，叫做“快进”（fast-forward）不过这种情况如果删除分支，则会丢失merge分支信息。</li> </ol> <ul> <li> <p>–squash 把一些不必要commit进行压缩，比如说，你的feature在开发的时候写的commit很乱，那么我们合并的时候不希望把这些历史commit带过来，于是使用–squash进行合并，此时文件已经同合并后一样了，但不移动HEAD，不提交。需要进行一次额外的commit来“总结”一下，然后完成最终的合并。</p> </li> <li> <p>–no-ff（推荐） 关闭fast-forward模式，在提交的时候，会创建一个merge的commit信息，然后合并的和master分支merge的不同行为，向后看，其实最终都会将代码合并到master分支，而区别仅仅只是==master分支上简洁清晰==的问题；然后向前看，也就是我们使用reset的时候，就会发现，不同的行为就带来了不同的影响</p> </li> </ul> <p><img src="https://img-blog.csdnimg.cn/b344b2363ab74a21b70ad04d62617d0b.png" alt="在这里插入图片描述"></p> <p>如果发生冲突，使用status查看冲突位置，冲突修复后add进入暂存区消除冲突</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git status
git add xxx
</code></pre></div></div> <h4 id="应用远端fork合并拉取fork项目代码"> <a class="anchor" href="#%E5%BA%94%E7%94%A8%E8%BF%9C%E7%AB%AFfork%E5%90%88%E5%B9%B6%E6%8B%89%E5%8F%96fork%E9%A1%B9%E7%9B%AE%E4%BB%A3%E7%A0%81" aria-hidden="true"><span class="octicon octicon-link"></span></a>应用：远端fork合并（<font color="red">拉取fork项目代码</font>）</h4> <p>Step 1: From your project repository, check out a new branch and test the changes.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout <span class="nt">-b</span> esirplayground-master
git pull https://github.com/esirplayground/AutoBuild-OpenWrt.git master
</code></pre></div></div> <p>Step 2: Merge the changes and update on GitHub.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout master
git merge <span class="nt">--no-ff</span> esirplayground-master
git push origin master
</code></pre></div></div> <h4 id="合并前排除某些修改"> <a class="anchor" href="#%E5%90%88%E5%B9%B6%E5%89%8D%E6%8E%92%E9%99%A4%E6%9F%90%E4%BA%9B%E4%BF%AE%E6%94%B9" aria-hidden="true"><span class="octicon octicon-link"></span></a>合并前排除某些修改</h4> <p><a href="https://stackoverflow.com/questions/66433827/how-to-skip-git-merging-a-certain-file-when-merging-between-branches">https://stackoverflow.com/questions/66433827/how-to-skip-git-merging-a-certain-file-when-merging-between-branches</a></p> <ol> <li>git merge –no-commit</li> <li>edit/revert the file to what you want it to be</li> <li>git add src/main/resources/application.properties</li> <li>git commit</li> </ol> <h3 id="对比-diff"> <a class="anchor" href="#%E5%AF%B9%E6%AF%94-diff" aria-hidden="true"><span class="octicon octicon-link"></span></a>对比 diff</h3> <p><img src="https://img-blog.csdnimg.cn/20191206132008918.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0xhd3Nzc3NDYXQ=,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git diff <span class="nt">--cached</span>（工作区-缓存区）
git diff HEAD  （工作区 - 缓存区 - 提交区 ）
</code></pre></div></div> <h3 id="忽略特殊文件-gitignore"> <a class="anchor" href="#%E5%BF%BD%E7%95%A5%E7%89%B9%E6%AE%8A%E6%96%87%E4%BB%B6-gitignore" aria-hidden="true"><span class="octicon octicon-link"></span></a><font color="red">忽略特殊文件 .gitignore</font> </h3> <p>注释 <code class="language-plaintext highlighter-rouge">#</code></p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
<span class="c">#忽略所有.svn目录</span>
.svn/
<span class="c">#忽略所有target目录</span>
target/
<span class="c">#忽略所有.idea目录</span>
.idea/
<span class="c">#忽略所有.iml文件</span>
<span class="k">*</span>.iml
</code></pre></div></div> <p>语法 | 含义 :– | :– <code class="language-plaintext highlighter-rouge">/</code> | 目录 <code class="language-plaintext highlighter-rouge">*</code> | 多个字符 <code class="language-plaintext highlighter-rouge">?</code> | 单个字符 <code class="language-plaintext highlighter-rouge">[]</code> | 多个可选字符匹配单个字符 <code class="language-plaintext highlighter-rouge">!</code> |不忽略(跟踪)匹配到的文件或目录</p> <p>对于是否把文件进行版本管理，还有下面命令参数</p> <ul> <li> <p><strong>添加版本管理 add -f</strong></p> <p>有些时候，你想添加一个文件到Git，但发现添加不了，原因是这个文件被.gitignore忽略了：</p> <div class="language-handlebars highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>  $ git add App.class
  The following paths are ignored by one of your .gitignore files:
  App.class
  Use -f if you really want to add them.
</code></pre></div> </div> <p>如果你确实想添加该文件，可以用-f强制添加到Git：</p> <div class="language-handlebars highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>  $ git add -f App.class
</code></pre></div> </div> </li> <li> <p><strong>检察版本管理 check-ignore</strong></p> <p>或者你发现，可能是.gitignore写得有问题，需要找出来到底哪个规则写错了，可以用git check-ignore命令检查：</p> <div class="language-handlebars highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>  $ git check-ignore -v App.class
  .gitignore:3:*.class	App.class
</code></pre></div> </div> <p>Git会告诉我们，.gitignore的第3行规则忽略了该文件，于是我们就可以知道应该修订哪个规则。</p> </li> <li> <p><strong>删除版本管理 rm</strong></p> <p><a href="https://blog.csdn.net/sarafina527/article/details/104555842">https://blog.csdn.net/sarafina527/article/details/104555842</a></p> <p>.gitignore只能忽略那些原来没有被track（之前没有add过）的文件，如果某些文件已经被纳入了版本管理中，则修改.gitignore是无效的。</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>  git <span class="nb">rm</span> <span class="nt">-r</span> <span class="nt">--cached</span> target
  git <span class="nb">rm</span> <span class="nt">-r</span> <span class="nt">--cached</span> .idea
</code></pre></div> </div> <p>此后不再追踪track这两个文件夹</p> </li> </ul> <h3 id="子模块-submodule"> <a class="anchor" href="#%E5%AD%90%E6%A8%A1%E5%9D%97-submodule" aria-hidden="true"><span class="octicon octicon-link"></span></a>子模块 submodule</h3> <h4 id="子模块添加"> <a class="anchor" href="#%E5%AD%90%E6%A8%A1%E5%9D%97%E6%B7%BB%E5%8A%A0" aria-hidden="true"><span class="octicon octicon-link"></span></a>子模块添加</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git submodule add ~/submd/repos/lib1.git 
</code></pre></div></div> <h4 id="子模块查看"> <a class="anchor" href="#%E5%AD%90%E6%A8%A1%E5%9D%97%E6%9F%A5%E7%9C%8B" aria-hidden="true"><span class="octicon octicon-link"></span></a>子模块查看</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git submodule 
</code></pre></div></div> <h4 id="子模块更新"> <a class="anchor" href="#%E5%AD%90%E6%A8%A1%E5%9D%97%E6%9B%B4%E6%96%B0" aria-hidden="true"><span class="octicon octicon-link"></span></a>子模块更新</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git submodule update
git submodule foreach git pull
git submodule foreach <span class="nt">--recursive</span> git submodule init 
git submodule foreach <span class="nt">--recursive</span> git submodule updat
</code></pre></div></div> <blockquote> <p><strong>注意：</strong><br><br> <code class="language-plaintext highlighter-rouge">git submodule add</code>命令新增 <code class="language-plaintext highlighter-rouge">.gitmodules</code> 文件<br> （记录了子模块的：名称、本地路径 path、网络路径 url）</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cat</span> .gitmodules 
<span class="o">[</span>submodule <span class="s2">"libs/lib1"</span><span class="o">]</span>
    path <span class="o">=</span> libs/lib1
    url <span class="o">=</span> /home/henryyan/submd/repos/lib1.git
</code></pre></div> </div> <p>同时，<code class="language-plaintext highlighter-rouge">.git/config</code> 文件的内容，最下面有 <code class="language-plaintext highlighter-rouge">submodule</code> 的注册信息！</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git config  <span class="nt">--list</span>  <span class="nt">--local</span>
...
submodule.libs/lib1.active<span class="o">=</span><span class="nb">true
</span>submodule.libs/lib1.url<span class="o">=</span>/home/henryyan/submd/repos/lib1.git
</code></pre></div> </div> <p>如果是子模块不是通过 <code class="language-plaintext highlighter-rouge">add</code> 添加，而是新拉的代码里面就有 <code class="language-plaintext highlighter-rouge">.gitmodules</code> 。这时候 <code class="language-plaintext highlighter-rouge">.git/config</code> 里是没有 <code class="language-plaintext highlighter-rouge">submodule</code> 的注册信息的，这时候需要 <code class="language-plaintext highlighter-rouge">init</code></p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>git submodule init
</code></pre></div> </div> <p>同时需要 <code class="language-plaintext highlighter-rouge">update</code> 把子模块下载下来</p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>git submodule update
</code></pre></div> </div> </blockquote> <p>拉仓库同时把子模块拉下来</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone <span class="nt">--recursive</span> /path/to/repos/foo.git
</code></pre></div></div> <h4 id="子模块移除"> <a class="anchor" href="#%E5%AD%90%E6%A8%A1%E5%9D%97%E7%A7%BB%E9%99%A4" aria-hidden="true"><span class="octicon octicon-link"></span></a>子模块移除</h4> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 逆初始化模块，其中{MOD_NAME}为模块目录，执行后可发现模块目录被清空</span>
git submodule deinit <span class="o">{</span>MOD_NAME<span class="o">}</span> 
<span class="c"># 删除.gitmodules中记录的模块信息（--cached选项清除.git/modules中的缓存）</span>
git <span class="nb">rm</span> <span class="nt">--cached</span> <span class="o">{</span>MOD_NAME<span class="o">}</span> 
<span class="c"># 提交更改到代码库，可观察到'.gitmodules'内容发生变更</span>
git commit <span class="nt">-am</span> <span class="s2">"Remove a submodule."</span> 
</code></pre></div></div> <blockquote> <p>此外，你可能还需要删除 <code class="language-plaintext highlighter-rouge">.git/modules/{MOD_NAME}</code> 的缓存，否则无法创建同名的module.</p> </blockquote> <h4 id="子模块修改"> <a class="anchor" href="#%E5%AD%90%E6%A8%A1%E5%9D%97%E4%BF%AE%E6%94%B9" aria-hidden="true"><span class="octicon octicon-link"></span></a>子模块修改</h4> <ol> <li>修改 <code class="language-plaintext highlighter-rouge">.gitmodules</code> 文件中对应模块的 <code class="language-plaintext highlighter-rouge">url</code> 属性</li> <li>使用 <code class="language-plaintext highlighter-rouge">git submodule sync</code> 命令，将新的URL更新到文件 <code class="language-plaintext highlighter-rouge">.git/config</code><br> （运行后可观察到 <code class="language-plaintext highlighter-rouge">.git/config</code> 中对应模块的 <code class="language-plaintext highlighter-rouge">url</code> 属性被更新） （较低版本git可能不能自动更新 <code class="language-plaintext highlighter-rouge">.git/config</code> 文件，需要手动修改）</li> </ol> <h3 id="未归类"> <a class="anchor" href="#%E6%9C%AA%E5%BD%92%E7%B1%BB" aria-hidden="true"><span class="octicon octicon-link"></span></a>未归类</h3> <ul> <li>《git fetch &amp; pull详解》<a href="https://www.cnblogs.com/runnerjack/p/9342362.html">https://www.cnblogs.com/runnerjack/p/9342362.html</a> </li> </ul> <p>clone tag fetch pull push rebase cherry-pick squash</p> <blockquote> <ul> <li>参考： <img class="emoji" title=":star:" alt=":star:" src="https://github.githubassets.com/images/icons/emoji/unicode/2b50.png" height="20" width="20"> 廖雪峰的官方网站</li> </ul> <p><a href="https://www.liaoxuefeng.com/wiki/896043488029600">https://www.liaoxuefeng.com/wiki/896043488029600</a></p> <ul> <li>原文： <a href="https://lawsssscat.blog.csdn.net/article/details/103386802">https://lawsssscat.blog.csdn.net/article/details/103386802</a> </li> </ul> </blockquote> </div><footer class="site-footer"> <script async defer src="https://buttons.github.io/buttons.js"></script> <!--todo google analysis--> <!--todo search e.g. lunr.js--><script type="module" src="/assets/js/modules/theme_button.js"></script><script type="module" src="/assets/js/modules/toc.js"></script><script type="module" src="/assets/js/modules/github_button.js"></script></footer></body> </html>
